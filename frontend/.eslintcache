[{"/Users/davidcao/dev/RedditStocks/frontend/src/index.js":"1","/Users/davidcao/dev/RedditStocks/frontend/src/App.js":"2","/Users/davidcao/dev/RedditStocks/frontend/src/reportWebVitals.js":"3","/Users/davidcao/dev/RedditStocks/frontend/src/components/Nav.js":"4","/Users/davidcao/dev/RedditStocks/frontend/src/components/Contact.js":"5","/Users/davidcao/dev/RedditStocks/frontend/src/components/About.js":"6","/Users/davidcao/dev/RedditStocks/frontend/src/components/EnterSecret.js":"7","/Users/davidcao/dev/RedditStocks/frontend/src/components/Socket.js":"8","/Users/davidcao/dev/RedditStocks/frontend/src/components/TickerTable.js":"9"},{"size":500,"mtime":1630103987137,"results":"10","hashOfConfig":"11"},{"size":5919,"mtime":1634972473838,"results":"12","hashOfConfig":"11"},{"size":362,"mtime":1630103987138,"results":"13","hashOfConfig":"11"},{"size":706,"mtime":1634775817364,"results":"14","hashOfConfig":"11"},{"size":2224,"mtime":1634977237619,"results":"15","hashOfConfig":"11"},{"size":372,"mtime":1634775817362,"results":"16","hashOfConfig":"11"},{"size":915,"mtime":1630208182400,"results":"17","hashOfConfig":"11"},{"size":9005,"mtime":1635037131532,"results":"18","hashOfConfig":"11"},{"size":3955,"mtime":1634966340648,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"gvwl0a",{"filePath":"23","messages":"24","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25","usedDeprecatedRules":"22"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"22"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"22"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"22"},"/Users/davidcao/dev/RedditStocks/frontend/src/index.js",[],["45","46"],"/Users/davidcao/dev/RedditStocks/frontend/src/App.js",["47"],"import './App.sass';\nimport React, { useState, useEffect, useRef } from \"react\"\nimport { useMediaQuery } from 'react-responsive'\n\nimport { BrowserRouter, Route, Switch  } from 'react-router-dom'\nimport Nav from './components/Nav'\nimport About from './components/About'\nimport Socket from './components/Socket'\nimport TickerTable from './components/TickerTable'\nimport Contact from './components/Contact'\nimport EnterSecret from './components/EnterSecret'\n\nimport io from \"socket.io-client\"\nimport axios from 'axios'\n\nconst ENDPOINT = process.env.REACT_APP_ENDPOINT\naxios.defaults.headers = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n}\nconsole.log('env endpoint: ' + process.env.REACT_APP_ENDPOINT)\n\nfunction Home() {\n    const [threads, setThreads] = useState([])\n    const [currentTickers, _setCurrentTickers] = useState({})\n    \n    // using ref to work around access the state in socket handler\n    // see https://medium.com/geographit/accessing-react-state-in-event-listeners-with-usestate-and-useref-hooks-8cceee73c559\n    const currentTickersRef = useRef(currentTickers)\n    const setCurrentTickers = tickers => { currentTickersRef.current = tickers; _setCurrentTickers(tickers)}\n\n    const isWide = useMediaQuery({\n        query: '(min-width: 1025px)'\n    })\n\n    const [queryHour, setQueryHour] = useState(1)\n    function updateTickerList(hour) {\n        console.log(hour)\n        axios.get(ENDPOINT + 'stats?hours=' + hour).then(res => {\n            const ticker_obj = {}\n            res?.data?.forEach(ticker => {\n                ticker_obj[ticker['name']] = ticker \n            })\n            setCurrentTickers(ticker_obj)\n        })\n    }\n\n    // update ticker list every time the query hour changes\n    useEffect(() => {\n        updateTickerList(queryHour)\n    }, [queryHour])\n\n    useEffect(() => {\n        // set up websockets\n        const socket = io(ENDPOINT);\n        const handleNewThread = data => {\n            setThreads(threads => [data, ...threads])\n\n            // console.log('current tickers', currentTickersRef.current)\n\n            // update ticker mention count\n            // add 1 to the mention if ticker already in list\n            // if not, initiate it\n            if (data.tickers.length > 0) {\n                const updatedTickerList = { ...currentTickersRef.current }\n\n                data.tickers.forEach(ticker => {\n                    let currentInfo\n                    if (ticker in updatedTickerList) {\n                        currentInfo = updatedTickerList[ticker]\n                    } else {\n                        currentInfo = {\n                            'name': ticker,\n                            'mentions': 0,\n                            'sentiment': 0,\n                            'positive_count': 0,\n                            'negative_count': 0,\n                            'neutral_count': 0,\n                        }\n                    }\n\n                    \n                    // update ticker's mention count\n                    currentInfo['mentions'] += 1\n                    \n                    // update sentiment\n                    currentInfo['sentiment'] = (currentInfo['sentiment'] * (currentInfo['mentions'] - 1) + data.sentiment) / currentInfo['mentions'] \n\n                    // update sentiment %\n                    if (data.sentiment > 0) {\n                        currentInfo['positive_count'] += 1    \n                    } else if (data.sentiment < 0) {\n                        currentInfo['negative_count'] += 1    \n                    } else if (data.sentiment === 0) {\n                        currentInfo['neutral_count'] += 1    \n                    }\n\n                    updatedTickerList[ticker] = currentInfo\n                })\n                setCurrentTickers(updatedTickerList)\n            }\n        }\n        socket.on(\"new thread\", handleNewThread)\n\n        // get last thread on first render\n        axios.get(ENDPOINT + 'last_thread').then(res => setThreads([res.data]))\n\n        return () => {\n            // turning of socket listner on unmount\n            socket.off('new thread', handleNewThread);\n        }\n    }, []);\n\n    // map the object that contains all tickers to add the 'name' field\n    // then sort it based on count\n    // console.log(currentTickers)\n    const sortedTickers = currentTickers ?\n        Object.values(currentTickers).sort((a, b) => (b.mentions - a.mentions)) \n        : []\n\n    // limit tickers to 1000\n    // allow users to set this in the futures\n    if(sortedTickers.length > 500) sortedTickers.length = 500\n    if(threads.length > 500) setThreads(threads.slice(0, 500))\n    console.log(sortedTickers)\n\n    return (\n        <div className={isWide ? 'main' : 'main-small'}>\n            <TickerTable tickers={sortedTickers} setQueryHour={setQueryHour} queryHour={queryHour}/>\n            <Socket threads={ threads }/>\n        </div>\n    )\n}\n\nfunction App() {\n    return (\n        <BrowserRouter>\n                <div className=\"App\">\n                <Nav />\n                <Switch>    \n                    <Route exact path='/' component={Home} />\n                    <Route path='/about' component={About} />\n                    <Route path='/contact' component={Contact} />\n                    <Route path='/code' component={EnterSecret} />\n                    {/* route reddit links to reddit */}\n                    <Route path='/r/:subreddit' component={() => { window.location.replace('https://reddit.com/' + window.location.pathname) }} />\n                    <Route path='/u/:user' component={() => { window.location.replace('https://reddit.com/' + window.location.pathname) }} />\n                   \n                    <Route path='*' component={()=>(<div>Oh no!!!! Page not found.</div>)} />\n                </Switch>\n                </div>\n        </BrowserRouter>\n    );\n}\n\nexport default App;\n","/Users/davidcao/dev/RedditStocks/frontend/src/reportWebVitals.js",[],"/Users/davidcao/dev/RedditStocks/frontend/src/components/Nav.js",["48","49"],"import './Nav.sass'\nimport React, { useEffect } from 'react'\n\nimport { Link } from 'react-router-dom'\n\nexport default function () {\n   \n    return (\n        <nav className='nav'>\n            <h1 className='logo'>Popular Tickers</h1>\n            <ul className='nav-links'>\n                <Link to={'/'} target=\"_self\">\n                    <li className='nav-link'>Home</li>\n                </Link>\n                <Link to={'/about'} target=\"_self\">\n                    <li className='nav-link'>About</li>\n                </Link>\n                <Link to={'/contact'} target=\"_self\">\n                    <li className='nav-link'>Contact</li>\n                </Link>\n            </ul>\n        </nav>\n    )\n}","/Users/davidcao/dev/RedditStocks/frontend/src/components/Contact.js",["50","51","52"],"import './Contact.sass'\nimport React, { useEffect, useState, useRef } from 'react'\nimport emailjs, { init } from 'emailjs-com'\ninit('user_REUMllQclwmLqErmaHbkL')\n\nexport default function () {\n    const [sent, setSent] = useState(false)\n    const [success, setSuccess] = useState(null)\n\n    function sendEmail() {\n        setSent(true)\n        emailjs.sendForm('service_3dajah7','template_nz2szng', '#contact-form')\n            .then(function(response) {\n                setSuccess(true)\n                console.log('SUCCESS!', response.status, response.text);\n            }, function(err) {\n                setSuccess(false)\n                console.log('FAILED...', err);\n            })\n    }\n\n    const form = (\n        <form id=\"contact-form\">\n            <div>\n                <label>Name: </label>\n                <input type=\"text\" name=\"user_name\" />\n            </div>\n            <div>\n                <label>Email: </label>\n                <input type=\"email\" name=\"user_email\" />\n            </div>\n            <div className='contact-comment'>\n                <textarea className='contact-text-area' name=\"message\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\n                <br/>\n                <div className='submit' onClick={sendEmail}>\n                    Submit\n                </div>\n            </div>\n        </form>\n    )\n    \n    return (\n        <div className='contact'>            \n            <h1>\n                Contact\n            </h1>\n            <div>\n                    Suggestions? Comments? Leave a message below!\n            </div>\n            <br/>\n            {sent ? \n                success === true ? (\n                    <div className=\"responseMsg\"><br/><br/>Message sent, thank you! ðŸ˜Š</div>\n                ) : (\n                        success === false ? (\n                            <div className=\"responseMsg\"><br/><br/>Message failed to send, please try again!</div>\n                        ) : (\n                            <div className=\"responseMsg\"><br/><br/>Sending message...</div>\n                        )\n                )\n            : form}\n            <br/>\n            <br />\n            <a href=\"/\" target=\"_self\">ðŸ‘ˆ Back to home</a>\n        </div>\n    )\n}","/Users/davidcao/dev/RedditStocks/frontend/src/components/About.js",["53","54","55","56"],"import './About.sass'\nimport React, { useEffect, useState, useRef } from 'react'\n\nexport default function () {\n    \n    return (\n        <div className='about'>            \n            <h1>\n                Find out what stocks Reddit is talking about!\n            </h1>\n\n            <br/>\n            <a href=\"/\" target=\"_self\">ðŸ‘ˆ Back to home</a>\n        </div>\n    )\n}","/Users/davidcao/dev/RedditStocks/frontend/src/components/EnterSecret.js",["57","58","59","60"],"import React, { useEffect, useState, useRef } from 'react'\n\nexport default function () {\n    function storeSecret() {\n        const secret = document.querySelector('#textArea').value\n        localStorage.setItem(\"blacklistSecret\", secret)\n        document.querySelector(\"#currentSecret\").textContent = localStorage.getItem(\"blacklistSecret\")\n    }\n    \n    return (\n        <div className='about'>            \n            <div className='contact-comment'>\n                <p id=\"currentSecret\">{localStorage.getItem(\"blacklistSecret\") || \"\"}</p>\n                <textarea className='contact-text-area' name=\"\" id=\"textArea\" cols=\"30\" rows=\"10\"></textarea>\n                <br/>\n                <div className='submit' onClick={storeSecret}>\n                    Submit\n                </div>\n            </div>\n            <br/>\n            <br />\n            <a href=\"/\">ðŸ‘ˆ Back to home</a>\n        </div>\n    )\n}","/Users/davidcao/dev/RedditStocks/frontend/src/components/Socket.js",["61","62","63","64","65","66","67","68","69","70","71","72"],"/Users/davidcao/dev/RedditStocks/frontend/src/components/TickerTable.js",["73","74","75"],"import React, { useEffect, useState } from 'react'\nimport { useMediaQuery } from 'react-responsive'\n\nimport \"./TickerTable.sass\"\n\n// tickers: sorted by mentions in App.js\nexport default function ({ tickers, queryHour, setQueryHour }) {\n    const isWide = useMediaQuery({\n        query: '(min-width: 1025px)'\n    })\n    \n    // console.log('ticker table: ', tickers)\n    const tickerRows = []\n    tickers?.forEach(ticker => {\n        // if (ticker.mentions > 2) {\n            tickerRows.push(<TickerRow key={ticker['name']} {...ticker} />)\n        // }\n    })\n    if(tickerRows.length > 300) tickerRows.length = 300\n\n    if(!isWide && tickerRows.length > 20) tickerRows.length = 20\n    // console.log('ticker rows: ', tickerRows)\n\n    return (\n        <div className=\"stats\">\n            <h1>Stats</h1>\n            <ul className='hour-selectors'>\n                <li className={`hour-selector nav-link ${queryHour === 1 ? 'hour-selected' : ''}`} onClick={()=>setQueryHour(1)}>1H</li>\n                <li className={`hour-selector nav-link ${queryHour === 4 ? 'hour-selected' : ''}`} onClick={()=>setQueryHour(4)}>4H</li>\n                <li className={`hour-selector nav-link ${queryHour === 12 ? 'hour-selected' : ''}`} onClick={()=>setQueryHour(12)}>12H</li>\n                <li className={`hour-selector nav-link ${queryHour === 24 ? 'hour-selected' : ''}`} onClick={()=>setQueryHour(24)}>1D</li>\n                <li className={`hour-selector nav-link ${queryHour === 72 ? 'hour-selected' : ''}`} onClick={()=>setQueryHour(72)}>3D</li>\n                <li className={`hour-selector nav-link ${queryHour === 168 ? 'hour-selected' : ''}`} onClick={()=>setQueryHour(168)}>1W</li>\n            </ul>\n            <table className='table'>\n                <thead>\n                    <tr>\n                        <th className='tickerName'>Ticker</th>\n                        <th>Mentions</th>\n                        <th>Strength</th>\n                        <th>Positive</th>\n                        <th>Neutral</th>\n                        <th>Negative</th>\n                    </tr>\n                </thead>\n                { tickerRows.length === 0 ? (\n                    <tbody>\n                        <tr>\n                            <td colSpan=\"6\">\n                                <br />\n                                Not data in this time frame yet.\n                            </td>\n                        </tr>\n                    </tbody>\n                ) : (\n                    <tbody>\n                        { tickerRows }\n                    </tbody>\n                )}\n            </table>\n        </div>\n    )    \n}\n\nfunction TickerRow({ name, mentions, sentiment, positive_count, neutral_count, negative_count }) {\n\n    // const sent_percent = sent_cnt => sent_cnt > 0 ? (sent_cnt / total_sent_cnt * 100).toFixed(2) + '%' : null\n\n    // const blacklistSecret = localStorage.getItem(\"blacklistSecret\")\n    \n    // function blacklistTicker() {\n    //     axios.post(serverURL + \"blacklist_ticker\", {\n    //         ticker,\n    //         secret: blacklistSecret\n    //     })\n    //     setShow(false)\n    // }\n\n    function googleTicker() {\n        window.open(\"https://www.google.com/search?q=\" + name + \"+stock\",'_blank')\n    }\n\n    return (\n        <tr>\n            <td className='tickerName' onClick={googleTicker}>\n                { name }\n            </td>\n            <td>{mentions}</td>\n            <td>{(sentiment*100).toFixed(2)}</td>\n            <td>{Math.round((positive_count / mentions)*100)}%</td>\n            <td>{Math.round((neutral_count / mentions)*100)}%</td>\n            <td>{Math.round((negative_count / mentions)*100)}%</td>\n            {\n                    // blacklistSecret &&\n                    //     <ToolTip tooltext={'Blacklist this ticker'} className={styles.remove} onClick={blacklistTicker}>\n                    //         X\n                    //     </ToolTip>\n            }\n        </tr>\n    )\n}",{"ruleId":"76","replacedBy":"77"},{"ruleId":"78","replacedBy":"79"},{"ruleId":"80","severity":1,"message":"81","line":51,"column":8,"nodeType":"82","endLine":51,"endColumn":19,"suggestions":"83"},{"ruleId":"84","severity":1,"message":"85","line":2,"column":17,"nodeType":"86","messageId":"87","endLine":2,"endColumn":26},{"ruleId":"88","severity":1,"message":"89","line":6,"column":1,"nodeType":"90","endLine":24,"endColumn":2},{"ruleId":"84","severity":1,"message":"85","line":2,"column":17,"nodeType":"86","messageId":"87","endLine":2,"endColumn":26},{"ruleId":"84","severity":1,"message":"91","line":2,"column":38,"nodeType":"86","messageId":"87","endLine":2,"endColumn":44},{"ruleId":"88","severity":1,"message":"89","line":6,"column":1,"nodeType":"90","endLine":67,"endColumn":2},{"ruleId":"84","severity":1,"message":"85","line":2,"column":17,"nodeType":"86","messageId":"87","endLine":2,"endColumn":26},{"ruleId":"84","severity":1,"message":"92","line":2,"column":28,"nodeType":"86","messageId":"87","endLine":2,"endColumn":36},{"ruleId":"84","severity":1,"message":"91","line":2,"column":38,"nodeType":"86","messageId":"87","endLine":2,"endColumn":44},{"ruleId":"88","severity":1,"message":"89","line":4,"column":1,"nodeType":"90","endLine":16,"endColumn":2},{"ruleId":"84","severity":1,"message":"85","line":1,"column":17,"nodeType":"86","messageId":"87","endLine":1,"endColumn":26},{"ruleId":"84","severity":1,"message":"92","line":1,"column":28,"nodeType":"86","messageId":"87","endLine":1,"endColumn":36},{"ruleId":"84","severity":1,"message":"91","line":1,"column":38,"nodeType":"86","messageId":"87","endLine":1,"endColumn":44},{"ruleId":"88","severity":1,"message":"89","line":3,"column":1,"nodeType":"90","endLine":25,"endColumn":2},{"ruleId":"84","severity":1,"message":"93","line":27,"column":7,"nodeType":"86","messageId":"87","endLine":27,"endColumn":20},{"ruleId":"94","severity":1,"message":"95","line":100,"column":57,"nodeType":"96","messageId":"97","endLine":100,"endColumn":59},{"ruleId":"98","severity":1,"message":"99","line":119,"column":61,"nodeType":"100","messageId":"101","endLine":119,"endColumn":62,"suggestions":"102"},{"ruleId":"98","severity":1,"message":"103","line":119,"column":68,"nodeType":"100","messageId":"101","endLine":119,"endColumn":69,"suggestions":"104"},{"ruleId":"98","severity":1,"message":"105","line":119,"column":70,"nodeType":"100","messageId":"101","endLine":119,"endColumn":71,"suggestions":"106"},{"ruleId":"107","severity":1,"message":"108","line":141,"column":59,"nodeType":"109","endLine":141,"endColumn":76},{"ruleId":"110","severity":1,"message":"111","line":158,"column":59,"nodeType":"112","endLine":158,"endColumn":74},{"ruleId":"110","severity":1,"message":"111","line":168,"column":116,"nodeType":"112","endLine":168,"endColumn":131},{"ruleId":"110","severity":1,"message":"111","line":169,"column":112,"nodeType":"112","endLine":169,"endColumn":127},{"ruleId":"110","severity":1,"message":"111","line":170,"column":65,"nodeType":"112","endLine":170,"endColumn":80},{"ruleId":"110","severity":1,"message":"111","line":171,"column":62,"nodeType":"112","endLine":171,"endColumn":77},{"ruleId":"80","severity":1,"message":"113","line":208,"column":8,"nodeType":"82","endLine":208,"endColumn":14,"suggestions":"114"},{"ruleId":"84","severity":1,"message":"85","line":1,"column":17,"nodeType":"86","messageId":"87","endLine":1,"endColumn":26},{"ruleId":"84","severity":1,"message":"92","line":1,"column":28,"nodeType":"86","messageId":"87","endLine":1,"endColumn":36},{"ruleId":"88","severity":1,"message":"89","line":7,"column":1,"nodeType":"90","endLine":63,"endColumn":2},"no-native-reassign",["115"],"no-negated-in-lhs",["116"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'updateTickerList'. Either include it or remove the dependency array.","ArrayExpression",["117"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","import/no-anonymous-default-export","Unexpected default export of anonymous function","ExportDefaultDeclaration","'useRef' is defined but never used.","'useState' is defined but never used.","'badWordsRegex' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-useless-escape","Unnecessary escape character: \\/.","Literal","unnecessaryEscape",["118","119"],"Unnecessary escape character: \\^.",["120","121"],"Unnecessary escape character: \\*.",["122","123"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXAttribute","React Hook useEffect has a missing dependency: 'setTimeoutToClose'. Either include it or remove the dependency array.",["124"],"no-global-assign","no-unsafe-negation",{"desc":"125","fix":"126"},{"messageId":"127","fix":"128","desc":"129"},{"messageId":"130","fix":"131","desc":"132"},{"messageId":"127","fix":"133","desc":"129"},{"messageId":"130","fix":"134","desc":"132"},{"messageId":"127","fix":"135","desc":"129"},{"messageId":"130","fix":"136","desc":"132"},{"desc":"137","fix":"138"},"Update the dependencies array to be: [queryHour, updateTickerList]",{"range":"139","text":"140"},"removeEscape",{"range":"141","text":"142"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"143","text":"144"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"145","text":"142"},{"range":"146","text":"144"},{"range":"147","text":"142"},{"range":"148","text":"144"},"Update the dependencies array to be: [setTimeoutToClose, show]",{"range":"149","text":"150"},[1848,1859],"[queryHour, updateTickerList]",[4338,4339],"",[4338,4338],"\\",[4345,4346],[4345,4345],[4347,4348],[4347,4347],[7652,7658],"[setTimeoutToClose, show]"]